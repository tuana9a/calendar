<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Test</title>
    </head>
    <body>
        <h1>hello this is test page</h1>
        <div>
            <h1>test get method</h1>
            <div> <span>request url: /test/get?</span><input type="text" id="test-get-q" value="q=tuan&e=test" /> </div>
            <div>
                <button id="test-get-button">send</button>
            </div>
            <div>
                <pre id="test-get-response">response here</pre>
            </div>
        </div>
        <div>
            <h1>test post method</h1>
            <div> <span>request url: /test/post</span></div>
            <div> <input type="text" id="test-post-body" value='{"some":"tuan", "thing":"11"}' /> </div>
            <div>
                <button id="test-post-button">send</button>
            </div>
            <div>
                <pre id="test-post-response">response here</pre>
            </div>
        </div>
        <div>
            <h1>test insert test</h1>
            <div> <span>request url: /test/api/test</span></div>
            <div> <input type="text" id="test-insert-test-body" value='{"name":"tuan", "age":"11"}' /> </div>
            <div>
                <button id="test-insert-test-button">send</button>
            </div>
            <div>
                <pre id="test-insert-test-response">response here</pre>
            </div>
        </div>
    </body>
    <script>
        document.getElementById("test-get-button").addEventListener("click", (e) => {
            let url = "/test/get?" + document.getElementById("test-get-q").value;
            fetch(url, { method: "GET" })
                .then((x) => x.json())
                .then((x) => (document.getElementById("test-get-response").innerHTML = JSON.stringify(x, null, "  ")));
        });
        document.getElementById("test-post-button").addEventListener("click", (e) => {
            let body = document.getElementById("test-post-body").value;
            let url = "/test/post";
            fetch(url, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    // "Content-Type": "application/json; charset=utf-8",
                },
                body: body,
            })
                .then((x) => x.json())
                .then((x) => (document.getElementById("test-post-response").innerHTML = JSON.stringify(x, null, "  ")));
        });
        document.getElementById("test-insert-test-button").addEventListener("click", (e) => {
            let body = document.getElementById("test-insert-test-body").value;
            let url = "/test/api/test";
            fetch(url, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    // "Content-Type": "application/json; charset=utf-8",
                },
                body: body,
            })
                .then((x) => x.json())
                .then((x) => (document.getElementById("test-insert-test-response").innerHTML = JSON.stringify(x, null, "  ")));
        });
    </script>
</html>
